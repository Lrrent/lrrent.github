<!doctype html>



  


<html class="theme-next muse use-motion">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"/>




  <link href="//fonts.googleapis.com/css?family=Lato:300,400,700,400italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">



<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=0.5.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=0.5.0" />






<meta name="description" content="随笔 随心">
<meta property="og:type" content="website">
<meta property="og:title" content="FOOLMAN 一个人的修行">
<meta property="og:url" content="http://yoursite.com/page/2/index.html">
<meta property="og:site_name" content="FOOLMAN 一个人的修行">
<meta property="og:description" content="随笔 随心">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="FOOLMAN 一个人的修行">
<meta name="twitter:description" content="随笔 随心">



<script type="text/javascript" id="hexo.configuration">
  var NexT = window.NexT || {};
  var CONFIG = {
    scheme: 'Muse',
    sidebar: {"position":"left","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: 0,
      author: 'Author'
    }
  };
</script>

  <title> FOOLMAN 一个人的修行 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="default">

  










  
  
    
  

  <div class="container one-collumn sidebar-position-left 
   page-home 
 ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">FOOLMAN 一个人的修行</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">随笔 随心</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-home fa-fw"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-archive fa-fw"></i> <br />
            
            Archives
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-tags fa-fw"></i> <br />
            
            Tags
          </a>
        </li>
      

      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/12/18/使用TurboTop保持Windows窗口保持最前端/" itemprop="url">
                  使用TurboTop保持Windows上任意程序保持最前端
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2015-12-18T10:32:13+08:00" content="2015-12-18">
              2015-12-18
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/未分类/" itemprop="url" rel="index">
                    <span itemprop="name">未分类</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>有时候你可能需要把某个应用窗口保持在最前端，比如处理表单数据的时候将计算器放在最前面。<strong>TurboTop</strong> 这款免费PC工具可以让任意正在运行的应用窗口保持在最前端。</p>
<p>运行后点击托盘区图标可以看到正在运行的应用列表，勾选某个应用，此应用就会保持在最前端了，而且你可以勾选多个应用。</p>
<ul>
<li>软件名称： TurboTop</li>
<li>支援平台； Windows</li>
<li>软件下载： 官网<br>软件截图<br><img src="http://pics.ikamu.me/2014/10/fqqc6i7qh1taf2cvlk7g.png" alt="fqqc6i7qh1taf2cvlk7g"></li>
</ul>
<p>转载了其他人的文字，当个软件推荐给大家吧。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/12/16/使用RSA加密保护你的.net应用程序(winform)/" itemprop="url">
                  使用RSA加密保护你的.net应用程序(winform)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2015-12-16T17:43:28+08:00" content="2015-12-16">
              2015-12-16
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/未分类/" itemprop="url" rel="index">
                    <span itemprop="name">未分类</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>原文地址：<a href="http://www.codeproject.com/Articles/203840/RSA-License-Protection" target="_blank" rel="external">http://www.codeproject.com/Articles/203840/RSA-License-Protection</a></p>
<h2 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h2><p>本文的目的是通过使用.net内置的RSA加密组件对winform程序进行签名并校验，以达到有效保护winform程序的目的。</p>
<h2 id="背景"><a href="#背景" class="headerlink" title="背景"></a>背景</h2><p>所有应用程序开发者，尤其是哪些程序需要销售并且得到付款的开发者，都或多或少的关注程序的未授权的分发问题。因为无论什么时候，程序都存在被破解（或反编译）的可能性，总有人不想花钱去买你的软件。而你需要明白的一个事实是，无论你如何加密软件，软件都存在被破解和反编译的事实，因此，加密的目的，并不是为了防止反编译或者破解，而是加大破解的难度，让大多数人觉得购买你的软件，比寻找破解版更加容易。并且最重要的一点，就是程序员需要花费更多的精力，去完善软件，提升服务，尤其是配套的，售后的服务质量，让顾客觉得心甘情愿购买你的软件，或者更确切的，是购买你的服务！然后，再回头来讨论下这篇文章的最初目的，就是你的程序，应当，也应该校验用户的合法性，毕竟你是需要赚钱的！  The best bit of programming you can do to secure your program is to make the program actually valuable to the user, so they <em>want</em> to buy it. But, the next best thing is a mechanism by which you can use to correctly identify valid users of the program. There is no end to these methods, and they all have varying levels of security, administration overhead, and user-annoyance. Here are some of the common methods:</p>
<h3 id="Serial-Number-Protection"><a href="#Serial-Number-Protection" class="headerlink" title="Serial Number Protection"></a>Serial Number Protection</h3><p>Found on the back of a CD case, the most common copy-protection you can find often involves a long serial number that is derived from an algorithm, such that only the original key-generator can produce valid keys. Often, the first few characters define a seed entry for a pseudo-random-number generator, and the remaining characters must match the transformed output of that number generator. This has a number of drawbacks:</p>
<ol>
<li>It is a blanket authorization: Usernames and License-end terms, partial licenses cannot be specified</li>
<li>All you need is a copy of the serial-number: there are hundreds of websites that list known serial numbers for almost any bit of commercial software.</li>
<li>The user has to type in a long annoying and difficult to read serial number in order to install the software.</li>
</ol>
<h3 id="Online-Activation"><a href="#Online-Activation" class="headerlink" title="Online Activation"></a>Online Activation</h3><p>An extension of serial-number protection: the application contacts a central server to validate that the serial-number is one that has been issued. This allows serial numbers to be blacklisted, tracked, etc. The main drawback is that the application must have internet access in order to validate the serial number. Users will probably not be happy about this (especially if they don’t have constant internet access) and you may find hackers patching your software not to illegally copy it, but just to get it to work offline. The other drawback is the amount of coding and development work that must go into a system like this that could be defeated by a proxy-server that simulates the responses of your own validation server.</p>
<h3 id="License-Terms-File"><a href="#License-Terms-File" class="headerlink" title="License Terms File"></a>License Terms File</h3><p>Many systems use a license file that is supplied to the user with their purchase. The license file specifies the licensee (the user’s name, address, contact details, etc.), the product being licensed, and the start and end dates of that license. The software asks for the license file on first use, copies it into a known location, then validates that the terms of the license are valid (correct software version, within the applicable date-range, etc.).</p>
<p>The trick here is to ensure that the license file that is supplied is authentic, if that part is covered, this is an excellent system for licensing: the license terms can be as simple or complex as you like (i.e. blanket authorization, or partial (certain features enabled)), they can have start and end dates, be restricted to particular applications or even restricted to particular users. The user isn’t forced to type in a long and complex serial-number, and having the users name and contact details embedded within the terms makes it less likely that users will voluntarily share the license file.</p>
<h3 id="Authenticating-the-License-File"><a href="#Authenticating-the-License-File" class="headerlink" title="Authenticating the License File"></a>Authenticating the License File</h3><p>There is a branch of cryptography that deals with verification (or signing) of data, using Asymmetrical Encryption.</p>
<p>A digital signature is produced from the data being verified by generating a hash-code from the source data, and encrypting this hash with a private key.<br>The hash code will be unique to the source data… if even one bit in the source data changes, the resulting hashcode will be quite different. (The “strength” of any hashing algorithm is indicated by how much the hash-code changes with the smallest possible edit of the source data).</p>
<p>Verification of the data is achieved by using the public-part of the key to check if the digital signature (the encrypted hash) still matches the data that is being verified. If any part of the data is changed, then the digital signature will not match.</p>
<p>This means that you can verify that the license file the system is using definitely came from you, (the sellers of the software) without having to give the application access to the private key. If you were to use symmetrical encryption to encrypt the license-terms (so they could not be seen or changed), then the application itself would need access to the encryption key, in order to decrypt the file. The key could be found within the application EXE and extracted, allowing pirates to generate their own license files.</p>
<p>Using asymmetrical encryption still requires that the application have access to the public part of the key, but knowing the public part of the key will not help anyone trying to hack the system.</p>
<p>The danger lies in pirates being able to replace or intercept the public key with one of their own making. This would require them to get into the <em>.exe</em> and alter the sequence of bytes that defines the public-key (whether it is a string-literal or a resource within the EXE).</p>
<p>This is beyond the scope I have given myself for this article, but just a quick mention:<br>signing the executable itself is one potential way of trying to stop this: modification of the executable will generate a different signature, and the application can be instructed not to open. (This is how the click-once manifests work, in fact, using click-once to deploy your application makes it (almost) impossible to modify that application without regenerating the click-once manifest file.)</p>
<h2 id="如何使用代码"><a href="#如何使用代码" class="headerlink" title="如何使用代码"></a>如何使用代码</h2><p>The logic for the licensing system is contained within the <code>General.Security</code>namespace within the example project: this code is non-specific and portable (it doesn’t reference any custom types outside the <code>General</code>namespace) and the two files (<em>Serializer.cs</em> and <em><span class="search-highlight">RSA</span>.cs</em>) can be moved to any project without change. The actual implementation of the licensing system (i.e. project specific code) is contained within the<code>validateLicenseFile()</code>method of the <code>static Program</code> class. This provides a good example of using the methods defined in the <code>General.Security</code>namespace. The <code>Program.validateLicenseFile()</code>method reads the <code>public</code>key out of the embedded resource (<em>Resources.resx</em>) and locates the license file (asking the user for the location if it can’t find it). It verifies the license file signature is correct, then extracts the license-terms, de-serializes them and checks that the current software and date/time is within the terms on the license. Supplied is an example license file (valid until the year 9999) for user “<code>Test</code>“ (<em>Test.lic</em>) - The public and private key files used to generate this license are also included.</p>
<p>This is the <code>validateLicense</code>method:</p>
<p><pre class="lang:c# decode:true ">/// validate the user-license.<br>internal static bool validateLicenseFile()<br>{<br>    try<br>    {<br>        // reserve a license object:<br>        License license = null;</pre></p>
<pre><code>    // get the public key from internal resource:
    String publicKey = Properties.Resources.publicKey;

    // work out the expected license file-name:
    String licenseFile = Application.LocalUserAppDataPath + &quot;\\&quot; + 
                Environment.UserName + &quot;_user.lic&quot;;

    // does the license file exist?
    if (File.Exists(licenseFile))
    {
        // load the license:
        license = License.Load(licenseFile);
    }
    else
    {
        // prompt the user for a license file:
        OpenFileDialog dlg = new OpenFileDialog();

        // setup a dialog;
        dlg.Filter = &quot;User License Files (*.lic)|*.lic&quot;;
        dlg.Title = &quot;Select License File&quot;;

        if (dlg.ShowDialog() == DialogResult.OK)
        {
            try
            {
                // copy the license file into the local app data directory:
                File.Copy(dlg.FileName, licenseFile);

                // if it made it here, load it:
                if (File.Exists(licenseFile))
                {
                    license = License.Load(licenseFile);
                }
            }
            catch
            {
                // can&apos;t copy the file?.. load the original:
                license = License.Load(dlg.FileName);
            }
        }
    }
    if (license != null)
    {
        // validate the signature on the license with the message contents, 
        // and the public key:
        LicenseAuthorization.ValidateLicense(license, publicKey);

        // if we get here, the license is valid;
        return true;
    }
    else
    {
        // no license file...
        MessageBox.Show(&quot;License File Not Supplied!&quot;, &quot;License Check&quot;);
        return false;
    }
}
catch (SecurityException se)
{
    // display the reason for the license check failure:
    MessageBox.Show(se.Message, &quot;License Check&quot;);
}

// return false...invalid license.
return false;
}
</code></pre><p>}</p>
<div id="contentdiv" class="text"><br><br>## Points of Interest<br><br>Something I discovered while doing the research for this: You can convert an array of bytes to a printable <code>string</code>using <code>Convert.ToBase64String()</code>. The result <code>string</code>always contains printable ASCII characters, and it is definitely not human-readable. The <code>LicenseTerms</code>class for this article, (which contains the start date, end date, product name, user name, etc.) is stored in the license file (which is XML) as a <code>string</code>. The <code>string</code>is created by serializing the licence-terms class to a byte-array using the binary-formatter. This doesn’t encrypt the license terms by any means, but it makes it much harder to read, and it also makes it easy to deal with (no special serialization is required to save a <code>string</code>).<br><br>## 更新版本<br><br>*   Version 1.0<br></div><br><div class="float-right"></div>

<h2 id="文章授权"><a href="#文章授权" class="headerlink" title="文章授权"></a>文章授权</h2><div id="LicenseTerms"><br><br>This article, along with any associated source code and files, is licensed under <a href="http://www.codeproject.com/info/cpol10.aspx" target="_blank" rel="external">The Code Project Open License (CPOL)</a><br><br></div>
          
        
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/12/10/C#全局键盘监听（Hook）的使用/" itemprop="url">
                  C#全局键盘监听（Hook）的使用
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2015-12-10T14:08:45+08:00" content="2015-12-10">
              2015-12-10
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/未分类/" itemprop="url" rel="index">
                    <span itemprop="name">未分类</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="为什么需要全局键盘监听？"><a href="#为什么需要全局键盘监听？" class="headerlink" title="为什么需要全局键盘监听？"></a>为什么需要全局键盘监听？</h2><p>在某些情况下应用程序需要实现快捷键执行特定功能，例如大家熟知的QQ截图功能Ctrl+Alt+A快捷键，只要QQ程序在运行（无论是拥有焦点还是处于后台运行状态），都可以按下快捷键使用此功能…</p>
<p>这个时候在程序中添加键盘监听肯定不能满足需求了，当用户焦点不在App上时（如最小化，或者用户在处理其它事物等等）键盘监听就失效了</p>
<h2 id="怎样才能实现全局键盘监听？"><a href="#怎样才能实现全局键盘监听？" class="headerlink" title="怎样才能实现全局键盘监听？"></a>怎样才能实现全局键盘监听？</h2><p>这里需要用到Windows API，源码如下：（可以作为一个工具类[KeyboardHook.cs]收藏起来）<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br></pre></td><td class="code"><pre><span class="line">using System;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using System.Text;</span><br><span class="line">using System.Runtime.InteropServices;</span><br><span class="line">using System.Windows.Forms;</span><br><span class="line">using System.Reflection;</span><br><span class="line"></span><br><span class="line">namespace 壁纸管家</span><br><span class="line">&#123;</span><br><span class="line">    /// &lt;summary&gt;</span><br><span class="line">    /// 键盘钩子</span><br><span class="line">    /// [以下代码来自某网友，并非本人原创]</span><br><span class="line">    /// &lt;summary&gt;</span><br><span class="line">    class KeyboardHook</span><br><span class="line">    &#123;</span><br><span class="line">        public event KeyEventHandler KeyDownEvent;</span><br><span class="line">        public event KeyPressEventHandler KeyPressEvent;</span><br><span class="line">        public event KeyEventHandler KeyUpEvent;</span><br><span class="line"></span><br><span class="line">        public delegate int HookProc(int nCode, Int32 wParam, IntPtr lParam);</span><br><span class="line">        static int hKeyboardHook = 0; //声明键盘钩子处理的初始值</span><br><span class="line">        //值在Microsoft SDK的Winuser.h里查询</span><br><span class="line">		// http://www.bianceng.cn/Programming/csharp/201410/45484.htm</span><br><span class="line">        public const int WH_KEYBOARD_LL = 13;   //线程键盘钩子监听鼠标消息设为2，全局键盘监听鼠标消息设为13</span><br><span class="line">        HookProc KeyboardHookProcedure; //声明KeyboardHookProcedure作为HookProc类型</span><br><span class="line">        //键盘结构</span><br><span class="line">        [StructLayout(LayoutKind.Sequential)]</span><br><span class="line">        public class KeyboardHookStruct</span><br><span class="line">        &#123;</span><br><span class="line">            public int vkCode;  //定一个虚拟键码。该代码必须有一个价值的范围1至254</span><br><span class="line">            public int scanCode; // 指定的硬件扫描码的关键</span><br><span class="line">            public int flags;  // 键标志</span><br><span class="line">            public int time; // 指定的时间戳记的这个讯息</span><br><span class="line">            public int dwExtraInfo; // 指定额外信息相关的信息</span><br><span class="line">        &#125;</span><br><span class="line">        //使用此功能，安装了一个钩子</span><br><span class="line">        [DllImport("user32.dll", CharSet = CharSet.Auto, CallingConvention = CallingConvention.StdCall)]</span><br><span class="line">        public static extern int SetWindowsHookEx(int idHook, HookProc lpfn, IntPtr hInstance, int threadId);</span><br><span class="line"></span><br><span class="line">        //调用此函数卸载钩子</span><br><span class="line">        [DllImport("user32.dll", CharSet = CharSet.Auto, CallingConvention = CallingConvention.StdCall)]</span><br><span class="line">        public static extern bool UnhookWindowsHookEx(int idHook);</span><br><span class="line"></span><br><span class="line">        //使用此功能，通过信息钩子继续下一个钩子</span><br><span class="line">        [DllImport("user32.dll", CharSet = CharSet.Auto, CallingConvention = CallingConvention.StdCall)]</span><br><span class="line">        public static extern int CallNextHookEx(int idHook, int nCode, Int32 wParam, IntPtr lParam);</span><br><span class="line"></span><br><span class="line">        // 取得当前线程编号（线程钩子需要用到）</span><br><span class="line">        [DllImport("kernel32.dll")]</span><br><span class="line">        static extern int GetCurrentThreadId();</span><br><span class="line"></span><br><span class="line">        //使用WINDOWS API函数代替获取当前实例的函数,防止钩子失效</span><br><span class="line">        [DllImport("kernel32.dll")]</span><br><span class="line">        public static extern IntPtr GetModuleHandle(string name);</span><br><span class="line"></span><br><span class="line">        public void Start()</span><br><span class="line">        &#123;</span><br><span class="line">            // 安装键盘钩子</span><br><span class="line">            if (hKeyboardHook == 0)</span><br><span class="line">            &#123;</span><br><span class="line">                KeyboardHookProcedure = new HookProc(KeyboardHookProc);</span><br><span class="line">                hKeyboardHook = SetWindowsHookEx(WH_KEYBOARD_LL, KeyboardHookProcedure, GetModuleHandle(System.Diagnostics.Process.GetCurrentProcess().MainModule.ModuleName), 0);</span><br><span class="line">                //hKeyboardHook = SetWindowsHookEx(WH_KEYBOARD_LL, KeyboardHookProcedure, Marshal.GetHINSTANCE(Assembly.GetExecutingAssembly().GetModules()[0]), 0);</span><br><span class="line">                //************************************</span><br><span class="line">                //键盘线程钩子</span><br><span class="line">                //SetWindowsHookEx( 2,KeyboardHookProcedure, IntPtr.Zero, GetCurrentThreadId());//指定要监听的线程idGetCurrentThreadId(),</span><br><span class="line">                //键盘全局钩子,需要引用空间(using System.Reflection;)</span><br><span class="line">                //SetWindowsHookEx( 13,MouseHookProcedure,Marshal.GetHINSTANCE(Assembly.GetExecutingAssembly().GetModules()[0]),0);</span><br><span class="line">                //</span><br><span class="line">                //关于SetWindowsHookEx (int idHook, HookProc lpfn, IntPtr hInstance, int threadId)函数将钩子加入到钩子链表中，说明一下四个参数：</span><br><span class="line">                //idHook 钩子类型，即确定钩子监听何种消息，上面的代码中设为2，即监听键盘消息并且是线程钩子，如果是全局钩子监听键盘消息应设为13，</span><br><span class="line">                //线程钩子监听鼠标消息设为7，全局钩子监听鼠标消息设为14。lpfn 钩子子程的地址指针。如果dwThreadId参数为0 或是一个由别的进程创建的</span><br><span class="line">                //线程的标识，lpfn必须指向DLL中的钩子子程。 除此以外，lpfn可以指向当前进程的一段钩子子程代码。钩子函数的入口地址，当钩子钩到任何</span><br><span class="line">                //消息后便调用这个函数。hInstance应用程序实例的句柄。标识包含lpfn所指的子程的DLL。如果threadId 标识当前进程创建的一个线程，而且子</span><br><span class="line">                //程代码位于当前进程，hInstance必须为NULL。可以很简单的设定其为本应用程序的实例句柄。threaded 与安装的钩子子程相关联的线程的标识符</span><br><span class="line">                //如果为0，钩子子程与所有的线程关联，即为全局钩子</span><br><span class="line">                //************************************</span><br><span class="line">                //如果SetWindowsHookEx失败</span><br><span class="line">                if (hKeyboardHook == 0)</span><br><span class="line">                &#123;</span><br><span class="line">                    Stop();</span><br><span class="line">                    throw new Exception("安装键盘钩子失败");</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        public void Stop()</span><br><span class="line">        &#123;</span><br><span class="line">            bool retKeyboard = true;</span><br><span class="line"></span><br><span class="line">            if (hKeyboardHook != 0)</span><br><span class="line">            &#123;</span><br><span class="line">                retKeyboard = UnhookWindowsHookEx(hKeyboardHook);</span><br><span class="line">                hKeyboardHook = 0;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            if (!(retKeyboard)) throw new Exception("卸载钩子失败！");</span><br><span class="line">        &#125;</span><br><span class="line">        //ToAscii职能的转换指定的虚拟键码和键盘状态的相应字符或字符</span><br><span class="line">        [DllImport("user32")]</span><br><span class="line">        public static extern int ToAscii(int uVirtKey, //[in] 指定虚拟关键代码进行翻译。</span><br><span class="line">                                         int uScanCode, // [in] 指定的硬件扫描码的关键须翻译成英文。高阶位的这个值设定的关键，如果是（不压）</span><br><span class="line">                                         byte[] lpbKeyState, // [in] 指针，以256字节数组，包含当前键盘的状态。每个元素（字节）的数组包含状态的一个关键。如果高阶位的字节是一套，关键是下跌（按下）。在低比特，如果设置表明，关键是对切换。在此功能，只有肘位的CAPS LOCK键是相关的。在切换状态的NUM个锁和滚动锁定键被忽略。</span><br><span class="line">                                         byte[] lpwTransKey, // [out] 指针的缓冲区收到翻译字符或字符。</span><br><span class="line">                                         int fuState); // [in] Specifies whether a menu is active. This parameter must be 1 if a menu is active, or 0 otherwise.</span><br><span class="line"></span><br><span class="line">        //获取按键的状态</span><br><span class="line">        [DllImport("user32")]</span><br><span class="line">        public static extern int GetKeyboardState(byte[] pbKeyState);</span><br><span class="line"></span><br><span class="line">        [DllImport("user32.dll", CharSet = CharSet.Auto, CallingConvention = CallingConvention.StdCall)]</span><br><span class="line">        private static extern short GetKeyState(int vKey);</span><br><span class="line"></span><br><span class="line">        private const int WM_KEYDOWN = 0x100;//KEYDOWN</span><br><span class="line">        private const int WM_KEYUP = 0x101;//KEYUP</span><br><span class="line">        private const int WM_SYSKEYDOWN = 0x104;//SYSKEYDOWN</span><br><span class="line">        private const int WM_SYSKEYUP = 0x105;//SYSKEYUP</span><br><span class="line"></span><br><span class="line">        private int KeyboardHookProc(int nCode, Int32 wParam, IntPtr lParam)</span><br><span class="line">        &#123;</span><br><span class="line">            // 侦听键盘事件</span><br><span class="line">            if ((nCode &amp;gt;= 0) &amp;amp;&amp;amp; (KeyDownEvent != null || KeyUpEvent != null || KeyPressEvent != null))</span><br><span class="line">            &#123;</span><br><span class="line">                KeyboardHookStruct MyKeyboardHookStruct = (KeyboardHookStruct)Marshal.PtrToStructure(lParam, typeof(KeyboardHookStruct));</span><br><span class="line">                // raise KeyDown</span><br><span class="line">                if (KeyDownEvent != null &amp;amp;&amp;amp; (wParam == WM_KEYDOWN || wParam == WM_SYSKEYDOWN))</span><br><span class="line">                &#123;</span><br><span class="line">                    Keys keyData = (Keys)MyKeyboardHookStruct.vkCode;</span><br><span class="line">                    KeyEventArgs e = new KeyEventArgs(keyData);</span><br><span class="line">                    KeyDownEvent(this, e);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                //键盘按下</span><br><span class="line">                if (KeyPressEvent != null &amp;amp;&amp;amp; wParam == WM_KEYDOWN)</span><br><span class="line">                &#123;</span><br><span class="line">                    byte[] keyState = new byte[256];</span><br><span class="line">                    GetKeyboardState(keyState);</span><br><span class="line"></span><br><span class="line">                    byte[] inBuffer = new byte[2];</span><br><span class="line">                    if (ToAscii(MyKeyboardHookStruct.vkCode, MyKeyboardHookStruct.scanCode, keyState, inBuffer, MyKeyboardHookStruct.flags) == 1)</span><br><span class="line">                    &#123;</span><br><span class="line">                        KeyPressEventArgs e = new KeyPressEventArgs((char)inBuffer[0]);</span><br><span class="line">                        KeyPressEvent(this, e);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                // 键盘抬起</span><br><span class="line">                if (KeyUpEvent != null &amp;amp;&amp;amp; (wParam == WM_KEYUP || wParam == WM_SYSKEYUP))</span><br><span class="line">                &#123;</span><br><span class="line">                    Keys keyData = (Keys)MyKeyboardHookStruct.vkCode;</span><br><span class="line">                    KeyEventArgs e = new KeyEventArgs(keyData);</span><br><span class="line">                    KeyUpEvent(this, e);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">            //如果返回1，则结束消息，这个消息到此为止，不再传递。</span><br><span class="line">            //如果返回0或调用CallNextHookEx函数则消息出了这个钩子继续往下传递，也就是传给消息真正的接受者</span><br><span class="line">            return CallNextHookEx(hKeyboardHook, nCode, wParam, lParam);</span><br><span class="line">        &#125;</span><br><span class="line">        ~KeyboardHook()</span><br><span class="line">        &#123;</span><br><span class="line">            Stop();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h2 id="如何使用上面的工具类？"><a href="#如何使用上面的工具类？" class="headerlink" title="如何使用上面的工具类？"></a>如何使用上面的工具类？</h2><h3 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h3><p>把上面的工具类添加到项目中</p>
<h3 id="首先导入需要的命名空间"><a href="#首先导入需要的命名空间" class="headerlink" title="首先导入需要的命名空间"></a>首先导入需要的命名空间</h3><figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">using</span> System.Runtime.InteropServices; <span class="comment">//调用WINDOWS API函数时要用到</span></span><br><span class="line"><span class="keyword">using</span> Microsoft.Win32; <span class="comment">//写入注册表时要用到</span></span><br></pre></td></tr></table></figure>
<h3 id="安装Hook"><a href="#安装Hook" class="headerlink" title="安装Hook"></a>安装Hook</h3><p>在程序入口中写上下面的代码（本例中用了WinForm，在Form的构造方法中安装Hook即可）</p>
<pre class="lang:c# decode:true ">var k_hook = new KeyboardHook();
k_hook.KeyDownEvent += new KeyEventHandler(hook_KeyDown);//钩住键按下
k_hook.Start();//安装键盘钩子</pre>

<h3 id="判断输入键值（实现KeyDown事件）"><a href="#判断输入键值（实现KeyDown事件）" class="headerlink" title="判断输入键值（实现KeyDown事件）"></a>判断输入键值（实现KeyDown事件）</h3><p><pre class="lang:c# decode:true ">private void hook_KeyDown(object sender, KeyEventArgs e)<br>{<br>    //判断按下的键（Alt + A）<br>    if (e.KeyValue == (int)Keys.A &amp;&amp; (int)Control.ModifierKeys == (int)Keys.Alt)<br>    {<br>        System.Windows.Forms.MessageBox.Show(“按下了指定快捷键组合”);<br>    }<br>}</pre><br>注意几种不同的键值判断：</p>
<ul>
<li>单普通键（例如A）</li>
<li>单控制键+单普通键（例如Ctrl+A）</li>
<li>多控制键+单普通键（例如Ctrl+Alt+A）<br>上面的代码中演示了2，其它情况以此类推，无非就是添几个条件再&amp;&amp;起来就好</li>
</ul>
<p>搞定！</p>
<h2 id="使用全局键盘监听需要注意的问题-请读者朋友务必看看"><a href="#使用全局键盘监听需要注意的问题-请读者朋友务必看看" class="headerlink" title="使用全局键盘监听需要注意的问题(请读者朋友务必看看)"></a>使用全局键盘监听需要注意的问题(请读者朋友务必看看)</h2><p>在应用程序中使用全局键盘监听，会被360发现，弹窗提示用户“有程序正在监听键盘输入，是否阻止？”</p>
<p>所以如果程序中必须要用Hook应该告诉用户不会泄露其信息等等</p>
<p>或者直接把程序提交给360进行审核</p>
<p>否则杀软的提示会对用户体验造成极大的影响</p>
<p>P.S：本机只在360安全卫士环境下做了测试，其它杀软未知，应该也会提示类似的危险信息，故慎重使用Hook</p>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><p><a href="http://www.bianceng.cn/Programming/csharp/201410/45484.htm" target="_blank" rel="external">bianceng</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/12/10/Csharp全局键盘监听（Hook）的使用/" itemprop="url">
                  C#全局键盘监听（Hook）的使用
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2015-12-10T14:08:45+08:00" content="2015-12-10">
              2015-12-10
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/未分类/" itemprop="url" rel="index">
                    <span itemprop="name">未分类</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>文章主要参考了：<a href="http://www.bianceng.cn/Programming/csharp/201410/45484.htm" target="_blank" rel="external">http://www.bianceng.cn/Programming/csharp/201410/45484.htm</a></p>
<h2 id="为什么需要全局键盘监听？"><a href="#为什么需要全局键盘监听？" class="headerlink" title="为什么需要全局键盘监听？"></a>为什么需要全局键盘监听？</h2><p>在某些情况下应用程序需要实现快捷键执行特定功能，例如大家熟知的QQ截图功能Ctrl+Alt+A快捷键，只要QQ程序在运行（无论是拥有焦点还是处于后台运行状态），都可以按下快捷键使用此功能…</p>
<p>这个时候在程序中添加键盘监听肯定不能满足需求了，当用户焦点不在App上时（如最小化，或者用户在处理其它事物等等）键盘监听就失效了</p>
<h2 id="怎样才能实现全局键盘监听？"><a href="#怎样才能实现全局键盘监听？" class="headerlink" title="怎样才能实现全局键盘监听？"></a>怎样才能实现全局键盘监听？</h2><p>这里需要用到Windows API，源码如下：（可以作为一个工具类[KeyboardHook.cs]收藏起来）</p>
<pre class="lang:c# decode:true ">using System;
using System.Collections.Generic;
using System.Text;
using System.Runtime.InteropServices;
using System.Windows.Forms;
using System.Reflection;

namespace 壁纸管家
{
    /// &lt;summary&gt;
    /// 键盘钩子
    /// [以下代码来自某网友，并非本人原创]
    /// &lt;/summary&gt;
    class KeyboardHook
    {
        public event KeyEventHandler KeyDownEvent;
        public event KeyPressEventHandler KeyPressEvent;
        public event KeyEventHandler KeyUpEvent;

        public delegate int HookProc(int nCode, Int32 wParam, IntPtr lParam);
        static int hKeyboardHook = 0; //声明键盘钩子处理的初始值
        //值在Microsoft SDK的Winuser.h里查询
        // http://www.bianceng.cn/Programming/csharp/201410/45484.htm
        public const int WH_KEYBOARD_LL = 13;   //线程键盘钩子监听鼠标消息设为2，全局键盘监听鼠标消息设为13
        HookProc KeyboardHookProcedure; //声明KeyboardHookProcedure作为HookProc类型
        //键盘结构
        [StructLayout(LayoutKind.Sequential)]
        public class KeyboardHookStruct
        {
            public int vkCode;  //定一个虚拟键码。该代码必须有一个价值的范围1至254
            public int scanCode; // 指定的硬件扫描码的关键
            public int flags;  // 键标志
            public int time; // 指定的时间戳记的这个讯息
            public int dwExtraInfo; // 指定额外信息相关的信息
        }
        //使用此功能，安装了一个钩子
        [DllImport("user32.dll", CharSet = CharSet.Auto, CallingConvention = CallingConvention.StdCall)]
        public static extern int SetWindowsHookEx(int idHook, HookProc lpfn, IntPtr hInstance, int threadId);

        //调用此函数卸载钩子
        [DllImport("user32.dll", CharSet = CharSet.Auto, CallingConvention = CallingConvention.StdCall)]
        public static extern bool UnhookWindowsHookEx(int idHook);

        //使用此功能，通过信息钩子继续下一个钩子
        [DllImport("user32.dll", CharSet = CharSet.Auto, CallingConvention = CallingConvention.StdCall)]
        public static extern int CallNextHookEx(int idHook, int nCode, Int32 wParam, IntPtr lParam);

        // 取得当前线程编号（线程钩子需要用到）
        [DllImport("kernel32.dll")]
        static extern int GetCurrentThreadId();

        //使用WINDOWS API函数代替获取当前实例的函数,防止钩子失效
        [DllImport("kernel32.dll")]
        public static extern IntPtr GetModuleHandle(string name);

        public void Start()
        {
            // 安装键盘钩子
            if (hKeyboardHook == 0)
            {
                KeyboardHookProcedure = new HookProc(KeyboardHookProc);
                hKeyboardHook = SetWindowsHookEx(WH_KEYBOARD_LL, KeyboardHookProcedure, GetModuleHandle(System.Diagnostics.Process.GetCurrentProcess().MainModule.ModuleName), 0);
                //hKeyboardHook = SetWindowsHookEx(WH_KEYBOARD_LL, KeyboardHookProcedure, Marshal.GetHINSTANCE(Assembly.GetExecutingAssembly().GetModules()[0]), 0);
                //************************************
                //键盘线程钩子
                //SetWindowsHookEx( 2,KeyboardHookProcedure, IntPtr.Zero, GetCurrentThreadId());//指定要监听的线程idGetCurrentThreadId(),
                //键盘全局钩子,需要引用空间(using System.Reflection;)
                //SetWindowsHookEx( 13,MouseHookProcedure,Marshal.GetHINSTANCE(Assembly.GetExecutingAssembly().GetModules()[0]),0);
                //
                //关于SetWindowsHookEx (int idHook, HookProc lpfn, IntPtr hInstance, int threadId)函数将钩子加入到钩子链表中，说明一下四个参数：
                //idHook 钩子类型，即确定钩子监听何种消息，上面的代码中设为2，即监听键盘消息并且是线程钩子，如果是全局钩子监听键盘消息应设为13，
                //线程钩子监听鼠标消息设为7，全局钩子监听鼠标消息设为14。lpfn 钩子子程的地址指针。如果dwThreadId参数为0 或是一个由别的进程创建的
                //线程的标识，lpfn必须指向DLL中的钩子子程。 除此以外，lpfn可以指向当前进程的一段钩子子程代码。钩子函数的入口地址，当钩子钩到任何
                //消息后便调用这个函数。hInstance应用程序实例的句柄。标识包含lpfn所指的子程的DLL。如果threadId 标识当前进程创建的一个线程，而且子
                //程代码位于当前进程，hInstance必须为NULL。可以很简单的设定其为本应用程序的实例句柄。threaded 与安装的钩子子程相关联的线程的标识符
                //如果为0，钩子子程与所有的线程关联，即为全局钩子
                //************************************
                //如果SetWindowsHookEx失败
                if (hKeyboardHook == 0)
                {
                    Stop();
                    throw new Exception("安装键盘钩子失败");
                }
            }
        }
        public void Stop()
        {
            bool retKeyboard = true;

            if (hKeyboardHook != 0)
            {
                retKeyboard = UnhookWindowsHookEx(hKeyboardHook);
                hKeyboardHook = 0;
            }

            if (!(retKeyboard)) throw new Exception("卸载钩子失败！");
        }
        //ToAscii职能的转换指定的虚拟键码和键盘状态的相应字符或字符
        [DllImport("user32")]
        public static extern int ToAscii(int uVirtKey, //[in] 指定虚拟关键代码进行翻译。
                                         int uScanCode, // [in] 指定的硬件扫描码的关键须翻译成英文。高阶位的这个值设定的关键，如果是（不压）
                                         byte[] lpbKeyState, // [in] 指针，以256字节数组，包含当前键盘的状态。每个元素（字节）的数组包含状态的一个关键。如果高阶位的字节是一套，关键是下跌（按下）。在低比特，如果设置表明，关键是对切换。在此功能，只有肘位的CAPS LOCK键是相关的。在切换状态的NUM个锁和滚动锁定键被忽略。
                                         byte[] lpwTransKey, // [out] 指针的缓冲区收到翻译字符或字符。
                                         int fuState); // [in] Specifies whether a menu is active. This parameter must be 1 if a menu is active, or 0 otherwise.

        //获取按键的状态
        [DllImport("user32")]
        public static extern int GetKeyboardState(byte[] pbKeyState);

        [DllImport("user32.dll", CharSet = CharSet.Auto, CallingConvention = CallingConvention.StdCall)]
        private static extern short GetKeyState(int vKey);

        private const int WM_KEYDOWN = 0x100;//KEYDOWN
        private const int WM_KEYUP = 0x101;//KEYUP
        private const int WM_SYSKEYDOWN = 0x104;//SYSKEYDOWN
        private const int WM_SYSKEYUP = 0x105;//SYSKEYUP

        private int KeyboardHookProc(int nCode, Int32 wParam, IntPtr lParam)
        {
            // 侦听键盘事件
            if ((nCode &gt;= 0) &amp;&amp; (KeyDownEvent != null || KeyUpEvent != null || KeyPressEvent != null))
            {
                KeyboardHookStruct MyKeyboardHookStruct = (KeyboardHookStruct)Marshal.PtrToStructure(lParam, typeof(KeyboardHookStruct));
                // raise KeyDown
                if (KeyDownEvent != null &amp;&amp; (wParam == WM_KEYDOWN || wParam == WM_SYSKEYDOWN))
                {
                    Keys keyData = (Keys)MyKeyboardHookStruct.vkCode;
                    KeyEventArgs e = new KeyEventArgs(keyData);
                    KeyDownEvent(this, e);
                }

                //键盘按下
                if (KeyPressEvent != null &amp;&amp; wParam == WM_KEYDOWN)
                {
                    byte[] keyState = new byte[256];
                    GetKeyboardState(keyState);

                    byte[] inBuffer = new byte[2];
                    if (ToAscii(MyKeyboardHookStruct.vkCode, MyKeyboardHookStruct.scanCode, keyState, inBuffer, MyKeyboardHookStruct.flags) == 1)
                    {
                        KeyPressEventArgs e = new KeyPressEventArgs((char)inBuffer[0]);
                        KeyPressEvent(this, e);
                    }
                }

                // 键盘抬起
                if (KeyUpEvent != null &amp;&amp; (wParam == WM_KEYUP || wParam == WM_SYSKEYUP))
                {
                    Keys keyData = (Keys)MyKeyboardHookStruct.vkCode;
                    KeyEventArgs e = new KeyEventArgs(keyData);
                    KeyUpEvent(this, e);
                }

            }
            //如果返回1，则结束消息，这个消息到此为止，不再传递。
            //如果返回0或调用CallNextHookEx函数则消息出了这个钩子继续往下传递，也就是传给消息真正的接受者
            return CallNextHookEx(hKeyboardHook, nCode, wParam, lParam);
        }
        ~KeyboardHook()
        {
            Stop();
        }
    }
}</pre>

<h2 id="如何使用上面的工具类？"><a href="#如何使用上面的工具类？" class="headerlink" title="如何使用上面的工具类？"></a>如何使用上面的工具类？</h2><h3 id="准备工作"><a href="#准备工作" class="headerlink" title="准备工作"></a>准备工作</h3><p>把上面的工具类添加到项目中</p>
<h3 id="首先导入需要的命名空间"><a href="#首先导入需要的命名空间" class="headerlink" title="首先导入需要的命名空间"></a>首先导入需要的命名空间</h3><pre class="lang:c# decode:true ">using System.Runtime.InteropServices; //调用WINDOWS API函数时要用到
using Microsoft.Win32; //写入注册表时要用到</pre>

<h3 id="安装Hook，在程序入口中写上下面的代码（本例中用了WinForm，在Form的构造方法中安装Hook即可）"><a href="#安装Hook，在程序入口中写上下面的代码（本例中用了WinForm，在Form的构造方法中安装Hook即可）" class="headerlink" title="安装Hook，在程序入口中写上下面的代码（本例中用了WinForm，在Form的构造方法中安装Hook即可）"></a>安装Hook，在程序入口中写上下面的代码（本例中用了WinForm，在Form的构造方法中安装Hook即可）</h3><pre class="lang:c# decode:true ">var k_hook = new KeyboardHook();
k_hook.KeyDownEvent += new KeyEventHandler(hook_KeyDown);//钩住键按下
k_hook.Start();//安装键盘钩子</pre>

<h3 id="判断输入键值（实现KeyDown事件）"><a href="#判断输入键值（实现KeyDown事件）" class="headerlink" title="判断输入键值（实现KeyDown事件）"></a>判断输入键值（实现KeyDown事件）</h3><p><pre class="lang:c# decode:true ">private void hook_KeyDown(object sender, KeyEventArgs e)<br>{<br>    //判断按下的键（Alt + A）<br>    if (e.KeyValue == (int)Keys.A &amp;&amp; (int)Control.ModifierKeys == (int)Keys.Alt)<br>    {<br>        System.Windows.Forms.MessageBox.Show(“按下了指定快捷键组合”);<br>    }<br>}</pre><br>//注意几种不同的键值判断：<br>//1&gt;.单普通键（例如A）<br>//2&gt;.单控制键+单普通键（例如Ctrl+A）<br>//3&gt;.多控制键+单普通键（例如Ctrl+Alt+A）<br>//上面的代码中演示了2，其它情况以此类推，无非就是添几个条件再&amp;&amp;起来就好</p>
<p>搞定！</p>
<h2 id="使用全局键盘监听需要注意的问题-请读者朋友务必看看"><a href="#使用全局键盘监听需要注意的问题-请读者朋友务必看看" class="headerlink" title="使用全局键盘监听需要注意的问题(请读者朋友务必看看)"></a>使用全局键盘监听需要注意的问题(请读者朋友务必看看)</h2><p>在应用程序中使用全局键盘监听，会被360发现，弹窗提示用户“有程序正在监听键盘输入，是否阻止？”</p>
<p>所以如果程序中必须要用Hook应该告诉用户不会泄露其信息等等</p>
<p>或者直接把App提交给360审核</p>
<p>否则杀软的提示会对用户体验造成极大的影响</p>
<p>P.S：本机只在360安全卫士环境下做了测试，其它杀软未知，应该也会提示类似的危险信息，故慎重使用Hook</p>

          
        
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/12/10/Csharp模拟键盘操作-SendKey-SendKeys/" itemprop="url">
                  C# 模拟键盘操作--SendKey(),SendKeys()
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2015-12-10T13:58:22+08:00" content="2015-12-10">
              2015-12-10
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/未分类/" itemprop="url" rel="index">
                    <span itemprop="name">未分类</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>C#实现模拟键盘输入可以使用以下2个语法实现的，分别是：<br>SendKeys.Send(string keys);  //模拟汉字(文本)输入<br>SendKeys.SendWait(string keys); //模拟按键输入</p>
<p>先了解一下2个语法的用法吧！</p>
<p>（1）每个按键由一个或多个字符表示。为了指定单一键盘字符，必须按字符本身的键。例如，为了表示字母 A，可以用 “A” 作为 string。为了表示多个字符，就必须在字符后面直接加上另一个字符。例如，要表示 A、B 及 C，可用 “ABC” 作为 string。<br>（2）对 SendKeys 来说，加号 (+)、插入符 (^)、百分比符号 (%)、上划线 (~) 及圆括号 ( ) 都具有特殊意义。为了指定上述任何一个字符，要将它放在大括号 ({}) 当中。例如，要指定正号，可用 {+} 表示。方括号 ([ ]) 对 SendKeys 来说并不具有特殊意义，但必须将它们放在大括号中。在其它应用程序中，方括号有特殊意义，在出现动态数据交换 (DDE) 的时候，它可能具有重要意义。为了指定大括号字符，请使用 {}。<br>（3）为了在按下按键时指定那些不显示的字符，例如 ENTER 或 TAB 以及那些表示动作而非字符的按键，请使用下列代码：</p>
<p><table border="1" cellspacing="0" cellpadding="0"></table></p>
<p><tbody></tbody></p>
<p><tr></tr></p>
<p><td>按键</td></p>
<p><td>代码</td><br></p>
<p><tr></tr></p>
<p><td>BACKSPACE</td></p>
<p><td>{BACKSPACE}, {BS}, 或 {BKSP}</td><br></p>
<p><tr></tr></p>
<p><td>BREAK</td></p>
<p><td>{BREAK}</td><br></p>
<p><tr></tr></p>
<p><td>CAPS LOCK</td></p>
<p><td>{CAPSLOCK}</td><br></p>
<p><tr></tr></p>
<p><td>DEL or DELETE</td></p>
<p><td>{DELETE} 或 {DEL}</td><br></p>
<p><tr></tr></p>
<p><td>DOWN ARROW</td></p>
<p><td>{DOWN}</td><br></p>
<p><tr></tr></p>
<p><td>END</td></p>
<p><td>{END}</td><br></p>
<p><tr></tr></p>
<p><td>ENTER</td></p>
<p><td>{ENTER}或 ~</td><br></p>
<p><tr></tr></p>
<p><td>ESC</td></p>
<p><td>{ESC}</td><br></p>
<p><tr></tr></p>
<p><td>HELP</td></p>
<p><td>{HELP}</td><br></p>
<p><tr></tr></p>
<p><td>HOME</td></p>
<p><td>{HOME}</td><br></p>
<p><tr></tr></p>
<p><td>INS or INSERT</td></p>
<p><td>{INSERT} 或 {INS}</td><br></p>
<p><tr></tr></p>
<p><td>LEFT ARROW</td></p>
<p><td>{LEFT}</td><br></p>
<p><tr></tr></p>
<p><td>NUM LOCK</td></p>
<p><td>{NUMLOCK}</td><br></p>
<p><tr></tr></p>
<p><td>PAGE DOWN</td></p>
<p><td>{PGDN}</td><br></p>
<p><tr></tr></p>
<p><td>PAGE UP</td></p>
<p><td>{PGUP}</td><br></p>
<p><tr></tr></p>
<p><td>PRINT SCREEN</td></p>
<p><td>{PRTSC}</td><br></p>
<p><tr></tr></p>
<p><td>RIGHT ARROW</td></p>
<p><td>{RIGHT}</td><br></p>
<p><tr></tr></p>
<p><td>SCROLL LOCK</td></p>
<p><td>{SCROLLLOCK}</td><br></p>
<p><tr></tr></p>
<p><td>TAB</td></p>
<p><td>{TAB}</td><br></p>
<p><tr></tr></p>
<p><td>UP ARROW</td></p>
<p><td>{UP}</td><br></p>
<p><tr></tr></p>
<p><td>F1</td></p>
<p><td>{F1}</td><br></p>
<p><tr></tr></p>
<p><td>F2</td></p>
<p><td>{F2}</td><br></p>
<p><tr></tr></p>
<p><td>F3</td></p>
<p><td>{F3}</td><br></p>
<p><tr></tr></p>
<p><td>F4</td></p>
<p><td>{F4}</td><br></p>
<p><tr></tr></p>
<p><td>F5</td></p>
<p><td>{F5}</td><br></p>
<p><tr></tr></p>
<p><td>F6</td></p>
<p><td>{F6}</td><br></p>
<p><tr></tr></p>
<p><td>F7</td></p>
<p><td>{F7}</td><br></p>
<p><tr></tr></p>
<p><td>F8</td></p>
<p><td>{F8}</td><br></p>
<p><tr></tr></p>
<p><td>F9</td></p>
<p><td>{F9}</td><br></p>
<p><tr></tr></p>
<p><td>F10</td></p>
<p><td>{F10}</td><br></p>
<p><tr></tr></p>
<p><td>F11</td></p>
<p><td>{F1}</td><br></p>
<p><tr></tr></p>
<p><td>F12</td></p>
<p><td>{F12}</td><br></p>
<p><tr></tr></p>
<p><td>F13</td></p>
<p><td>{F13}</td><br></p>
<p><tr></tr></p>
<p><td>F14</td></p>
<p><td>{F14}</td><br></p>
<p><tr></tr></p>
<p><td>F15</td></p>
<p><td>{F15}</td><br></p>
<p><tr></tr></p>
<p><td>F16</td></p>
<p><td>{F16}</td><br><br><br><br>（4）SHIFT、CTRL 及 ALT 等按键结合的组合键，可在这些按键码的前面放置一个或多个代码，这些代码列举如下：</p>
<p><table border="1" cellspacing="0" cellpadding="0"></table></p>
<p><tbody></tbody></p>
<p><tr></tr></p>
<p><td>按键</td></p>
<p><td>代码</td><br></p>
<p><tr></tr></p>
<p><td>Shift</td></p>
<p><td>+</td><br></p>
<p><tr></tr></p>
<p><td>Ctrl</td></p>
<p><td>^</td><br></p>
<p><tr></tr></p>
<p><td>Alt</td></p>
<p><td>%</td><br><br><br><br>（5）输入汉字用SendKeys.Send(“汉字”);</p>
<p>样例代码：</p>
<p><pre class="lang:default decode:true ">using System;<br>using System.Collections.Generic;<br>using System.ComponentModel;<br>using System.Data;<br>using System.Drawing;<br>using System.Linq;<br>using System.Text;<br>using System.Windows.Forms;<br>namespace ApplicationForm<br>{<br>    public partial class Form1 : Form<br>    {<br>        public Form1()<br>        {<br>            InitializeComponent();<br>        }<br>        private void button1_Click(object sender, EventArgs e)<br>        {<br>            //光标移至richTextBox1<br>            richTextBox1.Focus();</pre></p>
<pre><code>        //模拟按下&quot;ABCDEFG&quot;
        SendKeys.SendWait(&quot;(ABCDEFG)&quot;);
        SendKeys.SendWait(&quot;{left 5}&quot;);
        SendKeys.SendWait(&quot;{h 10}&quot;);
        /*
        更多举例:
        SendKeys.SendWait(&quot;^C&quot;);  //Ctrl+C 组合键
        SendKeys.SendWait(&quot;+C&quot;);  //Shift+C 组合键
        SendKeys.SendWait(&quot;%C&quot;);  //Alt+C 组合键
        SendKeys.SendWait(&quot;+(AX)&quot;);  //Shift+A+X 组合键
        SendKeys.SendWait(&quot;+AX&quot;);  //Shift+A 组合键,之后按X键
        SendKeys.SendWait(&quot;{left 5}&quot;);  //按←键 5次
        SendKeys.SendWait(&quot;{h 10}&quot;);   //按h键 10次
        SendKeys.Send(&quot;汉字&quot;);  //模拟输入&quot;汉字&quot;2个字
        */
    }
}
</code></pre><p>}<br>原文出处：<a href="http://www.cnblogs.com/liujie1111/p/4268174.html" target="_blank" rel="external">http://www.cnblogs.com/liujie1111/p/4268174.html</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/12/10/一个微信电脑版或者QQ浏览器的微信聊天辅助工具v0-1b/" itemprop="url">
                  一个微信电脑版或者QQ浏览器的微信聊天辅助工具v0.1b
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2015-12-10T12:48:19+08:00" content="2015-12-10">
              2015-12-10
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/未分类/" itemprop="url" rel="index">
                    <span itemprop="name">未分类</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <blockquote>
<p>工具存在的目的，是让你的生活更加省心、省力、省钱</p>
</blockquote>
<p>怎么说呢，估计用到这个软件功能的人不是太多，具体环境就是如果你旁边的同事离你的工位很近，不想让他们瞟见你聊天的内容，尤其是好友的最后一句话，那么这个工具适合你。</p>
<p>开发环境：VS2015</p>
<p>语言：C#</p>
<p>下载地址：<a href="http://www.wuliaole.com/wp-content/uploads/2015/12/BlankChat-v0.1b1.rar" target="_blank" rel="external">BlankChat v0.1b</a></p>
<p>[<img src="http://7xrpbc.com1.z0.glb.clouddn.com/blankchatv0_1beta.jpg" alt="软件运行截图)"></p>
<p>最新版本：0.1beta</p>
<p>软件介绍：就是可以在聊天记录之前加上一堆空格，然后自动发出去，快捷键是<code>CTRL+ENTER</code>。</p>
<p>使用方法：首先要修改一下微信桌面版的发送快捷方式，要改成ENTER，否则会和软件的快捷键冲突。</p>

          
        
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/12/10/几款查壳工具.Net程序脱壳必备知识/" itemprop="url">
                  几款查壳工具.net程序脱壳必备知识
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2015-12-10T01:15:32+08:00" content="2015-12-10">
              2015-12-10
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/未分类/" itemprop="url" rel="index">
                    <span itemprop="name">未分类</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>查壳是解密的第一步，介绍几个工具，一个不好用，就换一个试试，其实我只知道PEiD，其他几个我只是看别人有介绍，就先翻译了。不过PEiD确实已经好几年没有更新过了，大家自己看着办吧。</p>
<h2 id="PEiD"><a href="#PEiD" class="headerlink" title="PEiD"></a><strong>PEiD</strong></h2><p><img src="http://3.bp.blogspot.com/-t-GjKMnx0Ug/T7UT9ftPKcI/AAAAAAAATFc/8kPy-6n0b4o/s1600/PEiD.png" alt="PEiD" title="PEiD"></p>
<p><center></center>这是最著名的查壳工具了吧，至少我觉得挺有名。可以查找超过600种不同壳子的签名，可惜。。不更新了。</p>
<p>软件界面小巧简单，最省事的办法就是直接吧EXE或者DLL文件拖到软件界面里面去，即可完成默认查壳动作，软件界面上可以显示壳子的名称、入口点地址（entry point）、文件偏移量（file offset）、链接信息（linker information）、EP区域（这是什么意思，我目前还不知道）（EP section）、第一个字节（first bytes），以及选定文件的子系统信息（subsystem information）。</p>
<p>PEiD有三种不同的扫描模式：</p>
<ul>
<li>正常模式（Normal Mode）：通过文档签名扫描PE文件的入口地址。</li>
<li>深度模式（Deep Mode）：通过文档签名扫描入口地址通常存在的区域。</li>
<li>硬汉模式（Hardcore Mode）：通过文档签名遍历遍历文件以找到PE文件的入口地址。<br>软件也支持命令行模式，拖放操作，甚至可以将程序置于桌面顶部。</li>
</ul>
<p><strong>下载地址:</strong> <a href="http://www.softpedia.com/get/Programming/Packers-Crypters-Protectors/PEiD-updated.shtml" target="_blank" rel="external">PEiD</a></p>
<h2 id="Exeinfo-PE"><a href="#Exeinfo-PE" class="headerlink" title="Exeinfo PE"></a><strong>Exeinfo PE</strong></h2><p><img src="http://1.bp.blogspot.com/-ImPTMsVdE8o/T7UT76kxv1I/AAAAAAAATFU/xP09LukRkvo/s1600/ExeinfoPE.png" alt="Exeinfo PE" title="Exeinfo PE"></p>
<p>Exeinfo PE相比PEiD来说更加强大，光从维护上这一点来说，就甩PEiD几条街啊，起码人家2015年11月还在维护更新。就算功能上没有前者好，但是。人家也可以改进啊。好了，废话太多了，Exeinfo PE不单可以显示壳子信息，并且可以显示入口点，文件便宜地址，链接信息，文件大小，EP区域，第一个字节位置，子系统，以及EXE文件的覆盖信息（overlay），并且其他选项更为丰富。</p>
<p>同样Exeinfo PE也支持选择文件，或者直接拖进去查壳。在程序的界面中，你可以让Exeinfo PE进行快速查壳，或者忽略EXE执行错误，程序也支持命令融合壳模式（integrate into the shell），和PEiD一样，程序可以置顶，打开登录模式，或者改变皮肤和默认使用的语言。</p>
<p><strong>下载地址:</strong> <a href="http://www.softpedia.com/get/Programming/Packers-Crypters-Protectors/ExEinfo-PE.shtml" target="_blank" rel="external">Exeinfo PE</a></p>
<h2 id="Language-2000"><a href="#Language-2000" class="headerlink" title="Language 2000"></a><strong>Language 2000</strong></h2><p><img src="http://1.bp.blogspot.com/-BnjxtyMtsq0/T7UT_E7EIiI/AAAAAAAATFk/SVZRh4TCHHs/s1600/language.png" alt="Language 2000" title="Language 2000"></p>
<p>Language 2000是一个比较简单的查壳工具，可以显示编译器的名称，语言，作者，还有作者的地址。这也许有助于你确定壳子的类型，但是也就那样了。</p>
<p>这个程序可以探测 EXE DLL以及OCX类型文件的编译器/加密器/壳子。</p>
<p><strong>下载地址：暂无。</strong></p>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><p><a href="http://sumtips.com/2012/05/detect-identify-exe-compiler-packer.html" target="_blank" rel="external">http://sumtips.com/2012/05/detect-identify-exe-compiler-packer.html</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/12/09/Easy-Watermark-使用方法/" itemprop="url">
                  Easy Watermark使用说明
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2015-12-09T01:40:54+08:00" content="2015-12-09">
              2015-12-09
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/未分类/" itemprop="url" rel="index">
                    <span itemprop="name">未分类</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>我们不能防止别人抄袭帖子，只能留一点优雅的标记，增加下别人抄袭的成本，但是，从另外一个方面，本来知识是抄不来的，如果你的图片是你的原创，加上个水印，也是顺理成章的事情。这里我介绍我的博客使用的水印程序，<a href="http://www.lyoyoo.com/index.php/archives/1250" target="_blank" rel="external">给wordpress图片加水印的3款插件</a>，这是国内一个博主的介绍帖子，无奈我去搜索这几个插件的时候，安装量太少了，因为我是懒人，担心开发者维护一段时间不管了。所以就选了Easy Watermark这款插件，安装量很大了，而且看评论里说已经用了3-4年了，就是他了。</p>
<p>首先就是搜索<a href="http://wordpress.org/plugins/easy-watermark/" target="_blank" rel="external">Easy Watermark</a>，安装。</p>
<p>然后，激活插件之后，进入设置 <strong>» Easy Watermark </strong>进行配置。</p>
<p><a href="http://www.wuliaole.com/wp-content/uploads/2015/12/QQ截图20151209002617.png" target="_blank" rel="external"><img src="http://www.wuliaole.com/wp-content/uploads/2015/12/QQ截图20151209002617-300x260.png" alt="QQ截图20151209002617"></a></p>
<p>注意的是，Easy watermark的设置有3个选项卡（Tab），在General选项卡里，第一项 Add watermark when uploading images是必须选的项目，就是说上传图片后，自动添加水印。但是别着急，没有水印图片加什么呢？</p>
<p>所以，需要进入第二个选项卡Image，去添加一张PNG或者GIF的图片（背景透明，不透明的水印，总觉得效果不是特别好）。然后可以选择图片的透明度，位置，以及是否缩放你的水印图片。</p>
<p>回来说第一个General选项卡，在Image Sizes里，默认选了几项应该满足你的要求，但是有一点，如果你希望把文章里的Featured image也加上水印，就要勾选post-thumbnail这一项。</p>
<p>恩，然后还有比较重要的一点，插件可以保存你上传的原始图片，所以那个Backup选项，如果你服务器空间比较富裕，最好也一起勾上。</p>
<p><img src="http://cdn2.wpbeginner.com/wp-content/uploads/2014/06/watermark-image.png" alt="Adding an image as a watermark on images in WordPress" title="Adding an image as a watermark on images in WordPress"></p>
<p>If you don’t want to add an image, but would rather add a text as watermark, then you need to click on the Text tab. You can enter the text you want to be displayed as watermark, choose font, font-size, opacity, and positioning of the watermark text.</p>
<p>也许制作一个水印图片对你比较麻烦，或者你压根不想用图片水印，那么就选择文字水印也是一个不错的选择。在第三个选项卡Text里面，你可以设置文字的字体，字号，透明度，以及位置等。</p>
<p>下面要说的就是这个插件比较牛X的地方了，批量去除或者添加水印！</p>
<h2 id="如何批量添加水印"><a href="#如何批量添加水印" class="headerlink" title="如何批量添加水印"></a>如何批量添加水印</h2><h4 id="Adding-Watermark-to-Your-Old-Images-in-WordPress"><a href="#Adding-Watermark-to-Your-Old-Images-in-WordPress" class="headerlink" title="Adding Watermark to Your Old Images in WordPress"></a>Adding Watermark to Your Old Images in WordPress</h4><p>如果你希望给安装插件之前的所有图片批量添加水印图片的话，进入 <strong>媒体</strong> <strong>» Easy Watermark </strong>然后选择 <em>Add watermark to all image</em> 按钮。</p>
<p>提醒，这个批量添加水印的过程不可逆，所以，最好先备份好了整个网站的图片，然后再做这一步的操作。</p>
<p><img src="http://cdn2.wpbeginner.com/wp-content/uploads/2014/06/watermark-all-images.png" alt="Watermark all images on your WordPress site" title="Watermark all images on your WordPress site"></p>
<h2 id="如何手动添加水印"><a href="#如何手动添加水印" class="headerlink" title="如何手动添加水印"></a>如何手动添加水印</h2><p>首先进入 <strong>设置 » Easy Watermark</strong>，确定没有勾选 <em>Automatically add watermark to images</em></p>
<p>&nbsp;</p>
<p>然后进入 <strong>多媒体 » 媒体库</strong> ，记得勾选左上角的图片显示方式，需要用列表的方式，否则是看不到如图上面的单独添加水印的选项的。</p>
<p><a href="http://www.wuliaole.com/wp-content/uploads/2015/12/QQ截图20151209013414.png" target="_blank" rel="external"><img src="http://www.wuliaole.com/wp-content/uploads/2015/12/QQ截图20151209013414-300x141.png" alt="QQ截图20151209013414"></a></p>
<h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><p><a href="http://www.wpbeginner.com/plugins/how-to-automatically-add-watermark-to-images-in-wordpress/" target="_blank" rel="external">http://www.wpbeginner.com/plugins/how-to-automatically-add-watermark-to-images-in-wordpress/</a></p>
<p>&nbsp;</p>

          
        
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/12/08/WordPress博客做好之后要做的事情/" itemprop="url">
                  wordpress博客做好之后要做的事情
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2015-12-08T21:58:04+08:00" content="2015-12-08">
              2015-12-08
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/未分类/" itemprop="url" rel="index">
                    <span itemprop="name">未分类</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><h3 id="当然是安装了，注意调整xshell里的权限，比如www和ftp账号的"><a href="#当然是安装了，注意调整xshell里的权限，比如www和ftp账号的" class="headerlink" title="当然是安装了，注意调整xshell里的权限，比如www和ftp账号的"></a>当然是安装了，注意调整xshell里的权限，比如www和ftp账号的</h3><h3 id="装好之后，记得调整-htaccess文件，默认centos下是没有这个文件的"><a href="#装好之后，记得调整-htaccess文件，默认centos下是没有这个文件的" class="headerlink" title="装好之后，记得调整.htaccess文件，默认centos下是没有这个文件的"></a>装好之后，记得调整.htaccess文件，默认centos下是没有这个文件的</h3><h3 id="安装theme，我目前用的d8的，记得要保证theme本身不带什么插件，否则就和自己后来装的容易冲突了，同时换一下logo"><a href="#安装theme，我目前用的d8的，记得要保证theme本身不带什么插件，否则就和自己后来装的容易冲突了，同时换一下logo" class="headerlink" title="安装theme，我目前用的d8的，记得要保证theme本身不带什么插件，否则就和自己后来装的容易冲突了，同时换一下logo"></a>安装theme，我目前用的d8的，记得要保证theme本身不带什么插件，否则就和自己后来装的容易冲突了，同时换一下logo</h3><h3 id="开始装插件，删掉hello-dolly，启动akimest，api填进去就ok了，安装了高级版本的TinyMCE编辑器，目前除了好用点，没发现其他用处。"><a href="#开始装插件，删掉hello-dolly，启动akimest，api填进去就ok了，安装了高级版本的TinyMCE编辑器，目前除了好用点，没发现其他用处。" class="headerlink" title="开始装插件，删掉hello dolly，启动akimest，api填进去就ok了，安装了高级版本的TinyMCE编辑器，目前除了好用点，没发现其他用处。"></a>开始装插件，删掉hello dolly，启动akimest，api填进去就ok了，安装了高级版本的TinyMCE编辑器，目前除了好用点，没发现其他用处。</h3><h3 id="不用多说或者畅言，评论在站立还是比较好，因为wordpress-4-3-1默认带了plupload，所以不需要安装之前的那个drag-and-drop插件了"><a href="#不用多说或者畅言，评论在站立还是比较好，因为wordpress-4-3-1默认带了plupload，所以不需要安装之前的那个drag-and-drop插件了" class="headerlink" title="不用多说或者畅言，评论在站立还是比较好，因为wordpress 4.3.1默认带了plupload，所以不需要安装之前的那个drag and drop插件了"></a>不用多说或者畅言，评论在站立还是比较好，因为wordpress 4.3.1默认带了plupload，所以不需要安装之前的那个drag and drop插件了</h3><h3 id="插一句，关于自动更新的，我在另外一个帖子里写了解决办法，更新wordpress过程中遇到“无法创建目录”问题如何解决？总之就是chmod-777-或者755，不多说了，会了就很方便。"><a href="#插一句，关于自动更新的，我在另外一个帖子里写了解决办法，更新wordpress过程中遇到“无法创建目录”问题如何解决？总之就是chmod-777-或者755，不多说了，会了就很方便。" class="headerlink" title="插一句，关于自动更新的，我在另外一个帖子里写了解决办法，更新wordpress过程中遇到“无法创建目录”问题如何解决？总之就是chmod -777 或者755，不多说了，会了就很方便。"></a>插一句，关于自动更新的，我在另外一个帖子里写了解决办法，<a href="http://www.wuliaole.com/%e6%9b%b4%e6%96%b0wordpress%e8%bf%87%e7%a8%8b%e4%b8%ad%e9%81%87%e5%88%b0%e6%97%a0%e6%b3%95%e5%88%9b%e5%bb%ba%e7%9b%ae%e5%bd%95%e9%97%ae%e9%a2%98%e5%a6%82%e4%bd%95%e8%a7%a3%e5%86%b3/" title="更新wordpress过程中遇到“无法创建目录”问题如何解决？ - 无聊小博" target="_blank" rel="external">更新wordpress过程中遇到“无法创建目录”问题如何解决？</a>总之就是chmod -777 或者755，不多说了，会了就很方便。</h3><h3 id="水印问题，我用的Easy-Watermark-0-6-0，这里有一个帖子，介绍了不少水印的插件，但是吧。。。可能作者推荐的，我这里显示安装量和活跃度比较低，就用了一个2个月前更新且符合4-3-1的水印工具，大家自己选择吧-，用着顺手就好。给wordpress图片加水印的3款插件。我自己写了一个中文版的使用介绍。"><a href="#水印问题，我用的Easy-Watermark-0-6-0，这里有一个帖子，介绍了不少水印的插件，但是吧。。。可能作者推荐的，我这里显示安装量和活跃度比较低，就用了一个2个月前更新且符合4-3-1的水印工具，大家自己选择吧-，用着顺手就好。给wordpress图片加水印的3款插件。我自己写了一个中文版的使用介绍。" class="headerlink" title="水印问题，我用的Easy Watermark 0.6.0，这里有一个帖子，介绍了不少水印的插件，但是吧。。。可能作者推荐的，我这里显示安装量和活跃度比较低，就用了一个2个月前更新且符合4.3.1的水印工具，大家自己选择吧 ，用着顺手就好。给wordpress图片加水印的3款插件。我自己写了一个中文版的使用介绍。"></a>水印问题，我用的Easy Watermark 0.6.0，这里有一个帖子，介绍了不少水印的插件，但是吧。。。可能作者推荐的，我这里显示安装量和活跃度比较低，就用了一个2个月前更新且符合4.3.1的水印工具，大家自己选择吧 ，用着顺手就好。<a href="http://www.lyoyoo.com/index.php/archives/1250" target="_blank" rel="external">给wordpress图片加水印的3款插件</a>。我自己写了一个中文版的使用介绍。</h3><h3 id="防盗链，"><a href="#防盗链，" class="headerlink" title="防盗链，"></a>防盗链，</h3><h3 id="备份"><a href="#备份" class="headerlink" title="备份"></a>备份</h3><h3 id="恢复"><a href="#恢复" class="headerlink" title="恢复"></a>恢复</h3><h2 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h2><p><a href="http://www.zhihu.com/question/22864602" target="_blank" rel="external">http://www.zhihu.com/question/22864602</a></p>

          
        
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                
                <a class="post-title-link" href="/2015/12/08/Chrome下使用Viuium快捷键/" itemprop="url">
                  Chrome下使用Viuium快捷键
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            <span class="post-meta-item-icon">
              <i class="fa fa-calendar-o"></i>
            </span>
            <span class="post-meta-item-text">Posted on</span>
            <time itemprop="dateCreated" datetime="2015-12-08T02:05:41+08:00" content="2015-12-08">
              2015-12-08
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp;
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">In</span>
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/未分类/" itemprop="url" rel="index">
                    <span itemprop="name">未分类</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
          

          

          
          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Viuium常用快捷键</p>
<p><table style="border-color: #000000;" width="718"></table></p>
<p><tbody></tbody></p>
<p><tr></tr></p>
<p><td width="66">J</td></p>
<p><td colspan="3" width="261">向下移动。</td></p>
<p><td width="90">i</td></p>
<p><td width="300">输入模式（如果发现命令不起作用，可能是进入输入模式了，此时按Esc回到命令模式）</td><br></p>
<p><tr></tr></p>
<p><td width="66">k</td></p>
<p><td colspan="3" width="261">向上移动。</td></p>
<p><td width="90">gi</td></p>
<p><td width="300">将焦点集中到第一个输入框（输入gNi则焦点集中到第N个输入框）</td><br></p>
<p><tr></tr></p>
<p><td width="66">H</td></p>
<p><td colspan="3" width="261">向左移动。</td></p>
<p><td width="90">f</td></p>
<p><td width="300">在当前的页面打开一个新的链接。</td><br></p>
<p><tr></tr></p>
<p><td width="66">l</td></p>
<p><td colspan="3" width="261">向右移动。</td></p>
<p><td width="90">F</td></p>
<p><td width="300">在新的页面打开一个新的链接。</td><br></p>
<p><tr></tr></p>
<p><td width="66">zH</td></p>
<p><td colspan="3" width="261">一直移动到左部。</td></p>
<p><td width="90">&lt;a-f&gt;</td></p>
<p><td width="300">在当前页面打开多个链接</td><br></p>
<p><tr></tr></p>
<p><td width="66">zL</td></p>
<p><td colspan="3" width="261">一直移动到右部。</td></p>
<p><td width="90">b</td></p>
<p><td width="300">在当前页打开一个书签。（输入部分网址会自动进行搜索）</td><br></p>
<p><tr></tr></p>
<p><td width="66">gg</td></p>
<p><td colspan="3" width="261">跳转到页面的顶部。</td></p>
<p><td width="90">B</td></p>
<p><td width="300">在新的标签页打开一个书签</td><br></p>
<p><tr></tr></p>
<p><td width="66">G</td></p>
<p><td colspan="3" width="261">跳转到页面的底部。</td></p>
<p><td width="90">gf</td></p>
<p><td width="300">循环到当前页面的下一个框层（可能跟页面制作有关，目前没用到）</td><br></p>
<p><tr></tr></p>
<p><td width="66">D</td></p>
<p><td colspan="3" width="261">向下翻页（PageDown）</td></p>
<p><td width="90"></td></p>
<p><td width="300"></td><br></p>
<p><tr></tr></p>
<p><td width="66">U</td></p>
<p><td colspan="3" width="261">向上翻页（PageUp）</td></p>
<p><td width="90">查找模式</td></p>
<p><td width="300">（和Vim相似）</td><br></p>
<p><tr></tr></p>
<p><td width="66">r</td></p>
<p><td colspan="3" width="261">重新载入该页（相当于F5刷新页面）</td></p>
<p><td width="90">/</td></p>
<p><td width="300">查找</td><br></p>
<p><tr></tr></p>
<p><td width="66">gs</td></p>
<p><td colspan="3" width="261">查看页面源代码</td></p>
<p><td width="90">n</td></p>
<p><td width="300">向下查找匹配内容</td><br></p>
<p><tr></tr></p>
<p><td width="66">yy</td></p>
<p><td colspan="3" width="261">拷贝当前页面的URL到剪贴板</td></p>
<p><td width="90">N</td></p>
<p><td width="300">向上查找匹配内容</td><br></p>
<p><tr></tr></p>
<p><td width="66">yf</td></p>
<p><td colspan="3" width="261">拷贝某一个URL到剪贴板（实际上是相当于输入了f，然后出现很多编码的URL，选择某个之后，相当于拷贝了某个，因为一个页面中可能有很多超链接）</td></p>
<p><td width="90"></td></p>
<p><td width="300"></td><br></p>
<p><tr></tr></p>
<p><td width="66">gu</td></p>
<p><td colspan="3" width="261">跳转到父页面（比如<a href="http://www.douban.com/group/vim/，输入后跳转到父页面即http://www.douban.com/group/，所以不同于H的快捷键是回到上个历史页面）" target="_blank" rel="external">http://www.douban.com/group/vim/，输入后跳转到父页面即http://www.douban.com/group/，所以不同于H的快捷键是回到上个历史页面）</a></td></p>
<p><td width="90">导航历史</td></p>
<p><td width="300"></td><br></p>
<p><tr></tr></p>
<p><td width="66">&lt;c-d&gt;</td></p>
<p><td width="104">下翻页</td></p>
<p><td width="66">&lt;c-u&gt;</td></p>
<p><td width="91">下翻页</td></p>
<p><td width="90">H</td></p>
<p><td width="300">回退上一个历史页面（相当于浏览器中的向左箭头）</td><br></p>
<p><tr></tr></p>
<p><td width="66">zi 和 zo</td></p>
<p><td colspan="3" width="261">放大/缩小</td></p>
<p><td width="90">L</td></p>
<p><td width="300">回到下一个历史页面（相当于浏览器的向右箭头）</td><br></p>
<p><tr></tr></p>
<p><td width="66">历史</td></p>
<p><td colspan="3" width="261"></td></p>
<p><td width="90"></td></p>
<p><td width="300"></td><br></p>
<p><tr></tr></p>
<p><td width="66">H</td></p>
<p><td colspan="3" width="261">后退</td></p>
<p><td width="90">标签页</td></p>
<p><td width="300"></td><br></p>
<p><tr></tr></p>
<p><td width="66">L</td></p>
<p><td colspan="3" width="261">前进</td></p>
<p><td width="90">K，gt</td></p>
<p><td width="300">跳转到右边的一个标签页</td><br></p>
<p><tr></tr></p>
<p><td width="66">标签页</td></p>
<p><td colspan="3" width="261"></td></p>
<p><td width="90">J，gT</td></p>
<p><td width="300">跳转到左边的一个标签页</td><br></p>
<p><tr></tr></p>
<p><td width="66">t</td></p>
<p><td colspan="3" width="261">打开新标签</td></p>
<p><td width="90">t</td></p>
<p><td width="300">创建一个新的标签页</td><br></p>
<p><tr></tr></p>
<p><td width="66">d</td></p>
<p><td colspan="3" width="261">关闭标签</td></p>
<p><td width="90">x</td></p>
<p><td width="300">关闭当前的标签页</td><br></p>
<p><tr></tr></p>
<p><td width="66">u</td></p>
<p><td colspan="3" width="261">还原标签</td></p>
<p><td width="90">X</td></p>
<p><td width="300">恢复刚刚关闭的标签页</td><br></p>
<p><tr></tr></p>
<p><td width="66">J/K</td></p>
<p><td colspan="3" width="261">下/上一个标签</td></p>
<p><td width="90"></td></p>
<p><td width="300"></td><br></p>
<p><tr></tr></p>
<p><td width="66">Hint 模式</td></p>
<p><td colspan="3" width="261"></td></p>
<p><td width="90"></td></p>
<p><td width="300"></td><br></p>
<p><tr></tr></p>
<p><td width="66">f/F</td></p>
<p><td colspan="3" width="261">进入 Hint 模式，后者会在新标签页中打开链接</td></p>
<p><td width="90"></td></p>
<p><td width="300"></td><br></p>
<p><tr></tr></p>
<p><td width="63"></td></p>
<p><td width="117"></td></p>
<p><td width="90"></td></p>
<p><td width="105"></td></p>
<p><td width="83"></td></p>
<p><td width="261"></td><br><br><br><br>&nbsp;</p>

          
        
      
    </div>

    <div>
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/3/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/images/default_avatar.jpg"
               alt="节约用爱" />
          <p class="site-author-name" itemprop="name">节约用爱</p>
          <p class="site-description motion-element" itemprop="description">随笔 随心</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">25</span>
              <span class="site-state-item-name">posts</span>
            </a>
          </div>
          
          
            <div class="site-state-item site-state-categories">
              
                <span class="site-state-item-count">3</span>
                <span class="site-state-item-name">categories</span>
              
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">6</span>
                <span class="site-state-item-name">tags</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        <div class="links-of-author motion-element">
          
        </div>

      </section>

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">节约用爱</span>
</div>

<div class="powered-by">
  Powered by <a class="theme-link" href="http://hexo.io">Hexo</a>
</div>

<div class="theme-info">
  Theme -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>



      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  


  




<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>

  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>

  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=0.5.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=0.5.0"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=0.5.0"></script>



  



  



  
  
  

  


</body>
</html>
